(function(t){function e(e){for(var r,o,n=e[0],c=e[1],l=e[2],d=0,p=[];d<n.length;d++)o=n[d],a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],r=!0,n=1;n<s.length;n++){var c=s[n];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=r,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"02cc":function(t,e,s){"use strict";var r=s("de37"),a=s.n(r);a.a},"05ee":function(t,e,s){},"0fb1":function(t,e,s){"use strict";var r=s("1db5"),a=s.n(r);a.a},"1ba7":function(t,e,s){},"1cb4":function(t,e,s){},"1db5":function(t,e,s){},2304:function(t,e,s){"use strict";var r=s("8eef"),a=s.n(r);a.a},"2d54":function(t,e,s){},"50dc":function(t,e,s){"use strict";var r=s("2d54"),a=s.n(r);a.a},"53d0":function(t,e,s){"use strict";var r=s("1ba7"),a=s.n(r);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("cadf"),s("551c"),s("f751"),s("097d");var r=s("a026"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("289d"),c=(s("5abe"),s("2f62")),l=s("db49"),u=s.n(l);function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}r["a"].use(n["a"]),r["a"].use(c["a"]);var m={name:u.a.appName,data:function(){return{}},computed:p({},Object(c["d"])(["database","user","userFirstName"])),methods:p({},Object(c["c"])(["setLoggedIn","setUser","setUserFirstName"])),created:function(){}},f=m,h=s("2877"),g=Object(h["a"])(f,a,i,!1,null,null,null),v=g.exports,b=s("8c4f"),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("MyHeader"),t.userLoggedIn?t._e():s("div",[s("AnonymousAuth")],1),s("section",{staticClass:"section"},[t.stitchReady?s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-3 restrict-height"},[s("div",{staticClass:"container"},[s("CategoryMenu")],1)]),s("div",{staticClass:"column scroll",attrs:{id:"products"}},[s("div",{staticClass:"container"},[s("ProductCards",{attrs:{path:t.path}})],1)])]):t._e()])],1)},y=[],O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",[s("section",{staticClass:"hero is-primary is-small"},[s("div",{staticClass:"hero-head"},[s("nav",{staticClass:"navbar"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"navbar-menu",attrs:{id:"navbarMenuHeroB"}},[s("div",{staticClass:"navbar-end"},[s("a",{staticClass:"navbar-item",on:{click:t.gotoHome}},[t._v("\n                    Home\n                ")]),t.customer.mugshotURL?s("a",{staticClass:"navbar-item"},[s("figure",{staticClass:"image is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:t.customer.mugshotURL,alt:"mugshot"},on:{click:t.gotoProfile}})])]):t._e(),s("a",{staticClass:"navbar-item",on:{click:t.gotoProfile}},[s("span",[t._v("Hi "+t._s(t.userFirstName))])]),t.userLoggedIn?t._e():s("a",{staticClass:"navbar-item"},[s("span",{on:{click:t.showLoginModal}},[t._v("Login/Register")])]),t.userLoggedIn?s("a",{staticClass:"navbar-item"},[s("span",{on:{click:t.logout}},[t._v("Sign out")])]):t._e(),t._m(1)])])])])]),t._m(2)])]),s("body",[s("div",{staticClass:"container"},[t.loginModalVisible?s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("UserLogin",{on:{"close-modal":t.hideLoginModal}}),s("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"},on:{click:t.hideLoginModal}})],1)]):t._e()])])])},_=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"navbar-brand"},[r("a",{staticClass:"navbar-item"},[r("img",{attrs:{src:s("c316"),alt:"Logo"}})]),r("span",{staticClass:"navbar-burger burger",attrs:{"data-target":"navbarMenuHeroB"}},[r("span"),r("span"),r("span")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"navbar-item"},[s("a",{staticClass:"button is-black",attrs:{href:"https://github.com/am-MongoDB/eCommerce",target:"_blank"}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fab fa-github"})]),s("span",[t._v("Source")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container has-text-centered"},[s("p",{staticClass:"title"},[t._v("\n                MongoDB Store\n            ")]),s("p",{staticClass:"subtitle"},[t._v("\n                Get it while it's hot!\n            ")])])])}],w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"login"}},[s("div",{staticClass:"notification is-primary"},[s("h1",{staticClass:"title is-2"},[t._v("Log into your existing account")]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-body"},[s("div",{staticClass:"field is-expanded"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0)])])]),s("div",{staticClass:"field is-expanded"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(1)])])])])]),s("div",{staticClass:"field is-grouped is-grouped-centered"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-success is-medium is-focused",on:{click:t.Login}},[t._m(2),s("span",[t._v("Login")])])]),s("p",{staticClass:"control"},[s("router-link",{attrs:{to:"/register"}},[s("button",{staticClass:"button is-medium has-background-grey-lighter"},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-edit"})]),s("span",[t._v("Register a new account")])])])],1)])]),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.error?s("div",{staticClass:"notification is-primary"},[s("strong",[t._v(t._s(t.progress))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n        "+t._s(t.success)+"\n    ")]):t._e()])},j=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-key"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-check"})])}],P=s("9069");function E(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function k(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?E(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):E(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var D={name:"UserLogin",props:[],data:function(){return{error:"",success:"",progress:"",email:"",password:""}},computed:k({},Object(c["d"])(["stitchClient"])),methods:k({},Object(c["c"])([]),{},Object(c["b"])(["setUserLoggedIn"]),{Login:function(){var t=this;this.error="",this.success="",this.progress="Attempting to log you in...";var e=new P["e"](this.email,this.password);this.stitchClient.auth.loginWithCredential(e).then(function(e){t.$store.dispatch("setUserLoggedIn",e).then(function(){t.progress="This window will close in 2 seconds",t.success="Successfully logged in with id: ".concat(e.id),console.log(t.success);var s=t;setTimeout(function(){s.$emit("close-modal")},2e3)},function(e){t.progress="",t.error="Failed to log in user: ".concat(e.message),console.error(t.error)})},function(e){t.error="Failed to log in user: ".concat(e.message),t.progress="",console.error(t.error)})}}),created:function(){}},x=D,S=Object(h["a"])(x,w,j,!1,null,null,null),$=S.exports;function I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function R(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?I(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var L={name:"Header",props:[],components:{UserLogin:$},data:function(){return{loginModalVisible:!1}},computed:R({},Object(c["d"])(["stitchClient","customer","userFirstName","userLoggedIn"])),methods:R({},Object(c["c"])(["signout"]),{showLoginModal:function(){this.loginModalVisible=!0},hideLoginModal:function(){this.loginModalVisible=!1},gotoProfile:function(){this.userLoggedIn&&this.$router.push({name:"profile"})},gotoHome:function(){this.$router.push({name:"home"})},logout:function(){var t=this;this.stitchClient.auth.logout().then(function(){t.signout()},function(t){console.error("Error: Failed to sign out ".concat(t.message))})}}),created:function(){}},A=L,F=Object(h["a"])(A,O,_,!1,null,"5d2f1d05",null),N=F.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n      "+t._s(t.success)+"\n  ")]):t._e(),t.progress?s("div",{staticClass:"notification is-primary"},[t._v("\n      "+t._s(t.progress)+"\n  ")]):t._e()])},U=[];function M(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function H(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?M(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):M(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var B={name:"AnonymousAuth",data:function(){return{error:"",progress:"",success:"",localStitchClient:{}}},computed:H({},Object(c["d"])(["stitchClient","database"])),methods:H({},Object(c["c"])(["setDatabase","setStitchClient"]),{anonymousLogin:function(){var t=this;this.localStitchClient.auth.isLoggedIn?(this.setStitchClient(this.localStitchClient),this.connectDatabase()):(this.progress="Authing app...",this.localStitchClient.auth.loginWithCredential(new P["a"]).then(function(){console.log("Authed"),t.progress="",t.connectDatabase(),t.setStitchClient(t.localStitchClient)}).catch(function(e){t.progress="",t.error="Anonymous Stitch authentication failed: ".concat(e.message),console.error(t.error)}))},connectDatabase:function(){try{var t=this.localStitchClient.getServiceClient(P["b"].factory,"mongodb-atlas").db(u.a.database);this.setDatabase(t)}catch(e){this.error="Failed to connect to the database: ".concat(e.message),console.error(this.error)}}}),mounted:function(){try{console.log("Trying to get app client"),this.localStitchClient=P["c"].getAppClient(u.a.appId),console.log("Got the client")}catch(t){console.log("Caught no default client"),this.localStitchClient=P["c"].initializeDefaultAppClient(u.a.appId)}this.anonymousLogin()}},z=B,W=Object(h["a"])(z,T,U,!1,null,null,null),q=W.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section",attrs:{id:"product-cards"}},[s("ul",{attrs:{id:"product-list"}},t._l(t.products,function(e){return s("li",{key:e.productId},[s("a",{on:{click:function(s){return t.jumpToProduct(e.productID)}}},[s("ProductCard",{attrs:{product:e}})],1)])}),0)]),s("br"),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n      "+t._s(t.success)+"\n  ")]):t._e(),t.progress?s("div",{staticClass:"notification is-primary"},[t._v("\n      "+t._s(t.progress)+"\n  ")]):t._e()])},V=[],J=(s("7514"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"box"},[s("article",{staticClass:"media"},[s("div",{staticClass:"media-left"},[s("figure",{staticClass:"image is-128x128"},[s("img",{attrs:{src:t.product.productImages[0]}})])]),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("h6",{staticClass:"title is-6"},[t._v(t._s(t.product.productName))]),t.product.category?s("span",{staticClass:"tag"},[t._v(t._s(t.product.category))]):t._e(),s("p",[s("strong",[t._v("$"+t._s(t.product.price.sale))]),t.product.price.list>t.product.price.sale?s("span",[s("small",[t._v(" Reduced from $"+t._s(t.product.price.list))])]):t._e(),s("br"),t._v("\n                    "+t._s(t.productSummary))]),s("Rank",{attrs:{score:t.product.reviews.averageReviewScore,numberReviews:t.product.reviews.numberOfReviews}})],1),t._m(0),t.progress?s("div",{staticClass:"notification is-info"},[t._v("\n                    "+t._s(t.progress)+"\n                ")]):t._e(),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n                    "+t._s(t.success)+"\n                ")]):t._e()])])])])}),Y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"level is-mobile"},[s("div",{staticClass:"level-left"},[s("a",{staticClass:"level-item",attrs:{"aria-label":"reply"}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-reply",attrs:{"aria-hidden":"true"}})])]),s("a",{staticClass:"level-item",attrs:{"aria-label":"retweet"}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-retweet",attrs:{"aria-hidden":"true"}})])]),s("a",{staticClass:"level-item",attrs:{"aria-label":"like"}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-heart",attrs:{"aria-hidden":"true"}})])])])])}],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.numberReviews>0?s("div",{staticClass:"columns"},[s("div",{staticClass:"column",attrs:{id:"review-bar"}},[s("progress",{staticClass:"progress is-warning",attrs:{max:"5"},domProps:{value:t.score}})]),s("div",{staticClass:"column is-narrow"},[s("small",[t._v(t._s(t.score)+"/5 ("+t._s(t.numberReviews)+" review"),t.numberReviews>1?s("span",[t._v("s")]):t._e(),t._v(") ")])])]):t._e()])},Q=[];function X(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function Z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?X(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):X(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var tt={name:"Rank",props:["score","numberReviews"],components:{},data:function(){return{}},computed:Z({},Object(c["d"])([])),methods:{},created:function(){}},et=tt,st=(s("53d0"),Object(h["a"])(et,K,Q,!1,null,"141259b1",null)),rt=st.exports;function at(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function it(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?at(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):at(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var ot={name:"ProductCard",props:["product"],components:{Rank:rt},data:function(){return{success:"",progress:"",error:"",productDetails:{productName:"Loading...",productImages:[],price:"--"},productSummary:""}},computed:it({},Object(c["d"])([])),methods:{prepareProductData:function(){this.productSummary=this.product.description.substring(0,252)+"..."}},created:function(){this.prepareProductData()}},nt=ot,ct=(s("50dc"),Object(h["a"])(nt,J,Y,!1,null,"7e67d05c",null)),lt=ct.exports;function ut(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function dt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ut(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ut(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var pt={name:"ProductCards",props:[],components:{ProductCard:lt},data:function(){return{error:"",progress:"",success:"",products:[],bouncable:!1,lastProductID:"",lastInterest:99999999999}},computed:dt({},Object(c["d"])(["database","categoryFilter"])),watch:{categoryFilter:function(){console.log("categoryFilter: ".concat(this.categoryFilter)),this.lastProductID="",this.lastInterest=99999999999,this.products=[],this.fetchProductList()}},methods:{jumpToProduct:function(t){window.onscroll=function(){},this.$router.push({name:"product",query:{productID:t}})},fetchProductList:function(){var t=this;this.error="",this.success="",this.progress="Fetching product list",this.bouncable=!1,console.log("Fetching more products");var e={productID:{$gt:this.lastProductID}};if(this.categoryFilter.length>0){for(var s=[],r=0;r<this.categoryFilter.length;r++){var a="categoryHierarchy.".concat(r+1),i={};i[a]=this.categoryFilter[r],s.push(i)}e.$and=[{$and:s}]}console.log("Query: ".concat(String(e))),this.database.collection("products").find(e,{projection:{_id:0,productID:1,productName:1,description:1,category:1,productImages:1,price:1,"reviews.averageReviewScore":1,"reviews.numberOfReviews":1,interest:1},sort:{productID:-1},limit:20}).toArray().then(function(e){if(console.log("".concat(e.length," new products")),e.length>0){t.lastProductID=e[e.length-1].productID,t.lastInterest=e[e.length-1].interest,e.forEach(function(e){t.products.push(e)}),t.progress="";var s=t;setTimeout(function(){s.bouncable=!0},500)}else t.progress="",t.success="No more matching products."},function(e){t.progress="",t.error="Error: Failed to read the list of products – ".concat(e.message),console.error(t.error)})},scroll:function(){var t=this;window.onscroll=function(){var e=750+Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight,s=document.documentElement.offsetHeight;e>=s&&t.bouncable&&t.fetchProductList()}}},mounted:function(){this.fetchProductList(),this.scroll()}},mt=pt,ft=(s("e281"),Object(h["a"])(mt,G,V,!1,null,"7ea30306",null)),ht=ft.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.saleCategoryTree?s("div",[s("CategoryNode",{attrs:{nodes:t.saleCategoryTree.children,name:t.saleCategoryTree.name,count:t.saleCategoryTree.count,depth:0,path:[]}})],1):t._e(),t.categoryTree?s("div",[s("CategoryNode",{attrs:{nodes:t.categoryTree.children,name:t.categoryTree.name,count:t.categoryTree.count,depth:0,path:[]}})],1):t._e(),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n      "+t._s(t.success)+"\n  ")]):t._e(),t.progress?s("div",{staticClass:"notification is-primary"},[t._v("\n      "+t._s(t.progress)+"\n  ")]):t._e()])},vt=[],bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"category-menu"},[s("div",{style:t.indent,on:{click:t.categoryClicked}},[s("div",{staticClass:"control"},[s("a",{staticClass:"button is-not-outlined"},[s("span",{staticClass:"icon"},[t.nodes.length>0?s("i",{class:t.iconClasses}):t._e()]),s("span",[t._v(t._s(t.name)+" ")]),t.count?s("span",[s("small",[t._v("  ("+t._s(t.count)+")")])]):t._e()])])]),t.showChildren?s("div",t._l(t.nodes,function(e){return s("CategoryNode",{key:e.name,attrs:{name:e.name,count:e.count,nodes:e.children,depth:t.depth+1,path:t.newPath},on:{"set-category-filter":t.setCategoryFilter}})}),1):t._e()])])},Ct=[],yt=s("75fc");function Ot(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function _t(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ot(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ot(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var wt={name:"CategoryNode",props:["nodes","name","count","depth","path"],components:{},data:function(){return{showChildren:!1}},computed:_t({},Object(c["d"])(["userLoggedIn","database"]),{indent:function(){return{transform:"translate(".concat(10*this.depth,"px)")}},labelClasses:function(){return{"has-children":this.$children}},iconClasses:function(){return{"far fa-plus-square":!this.showChildren,"far fa-minus-square":this.showChildren}},newPath:function(){var t=Object(yt["a"])(this.path);return this.depth>0&&t.push(this.name),t}}),methods:_t({},Object(c["c"])(["setCategoryFilter"]),{categoryClicked:function(){this.showChildren=!this.showChildren,this.$emit("set-category-filter",this.newPath)}}),mounted:function(){}},jt=wt,Pt=(s("bf58"),Object(h["a"])(jt,bt,Ct,!1,null,"60be7048",null)),Et=Pt.exports;function kt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function Dt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?kt(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):kt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var xt={name:"CategoryMenu",props:[],components:{CategoryNode:Et},data:function(){return{error:"",progress:"",success:"",categoryTree:null,saleCategoryTree:null}},computed:Dt({},Object(c["d"])(["userLoggedIn","database"])),methods:{fetchTree:function(){var t=this;this.categoryTree||(this.progress="Fetching product categories",console.log("Fetching category tree"),this.database.collection("meta").findOne({name:"categoryTree"}).then(function(e){t.progress="",e&&e.children&&(e=e.children[0]),t.categoryTree=e},function(e){t.progress="",t.error="Failed to fetch the product categories: ".concat(e.message),console.error(t.error)}))},fetchSaleTree:function(){var t=this;this.saleCategoryTree||(this.progress="Fetching sales product categories",console.log("Fetching sales category tree"),this.database.collection("meta").findOne({name:"saleCategoryTree"}).then(function(e){t.progress="",e&&e.children&&(e=e.children[0]),t.saleCategoryTree=e},function(e){t.progress="",t.error="Failed to fetch the sales product categories: ".concat(e.message),console.error(t.error)}))}},mounted:function(){this.fetchSaleTree(),this.fetchTree()}},St=xt,$t=Object(h["a"])(St,gt,vt,!1,null,"5cfd448b",null),It=$t.exports,Rt=s("5118");function Lt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function At(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Lt(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Lt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Ft={name:"home",props:[],components:{AnonymousAuth:q,MyHeader:N,ProductCards:ht,CategoryMenu:It},data:function(){return{path:[],stitchReady:!1}},computed:At({},Object(c["d"])(["userLoggedIn","stitchClient"])),methods:{waitUntilStitchReady:function(){if(this.stitchClient&&this.stitchClient.auth.isLoggedIn)this.stitchReady=!0;else{console.log("Waiting");var t=this;Object(Rt["setTimeout"])(t.waitUntilStitchReady,100)}}},mounted:function(){this.waitUntilStitchReady(),console.log("Hi")}},Nt=Ft,Tt=(s("02cc"),Object(h["a"])(Nt,C,y,!1,null,"2e875796",null)),Ut=Tt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirm"},[s("MyHeader"),s("ConfirmStitchEmail")],1)},Ht=[],Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",{staticClass:"title is-1"},[t._v("Confirming email address")]),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n        "+t._s(t.success)+"\n    ")]):t._e(),t.cta?s("div",{staticClass:"notification is-primary"},[s("div",{staticClass:"content"},[t._v("\n            "+t._s(t.cta)+"                \n        ")])]):t._e()])},zt=[];s("386d");function Wt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function qt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Wt(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Wt(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Gt={name:"ConfirmStitchEmail",props:[],data:function(){return{error:"",success:"",cta:""}},computed:qt({},Object(c["d"])(["stitchClient"])),created:function(){var t,e=this,s="";try{var r=window.location.search,a=new URLSearchParams(r);t=a.get("token"),s=a.get("tokenId")}catch(o){this.error="Failed to parse URL parameters: ".concat(o.message),console.error(this.error)}try{var i=this.stitchClient.auth.getProviderClient(P["d"].factory);i.confirmUser(t,s).then(function(){e.success="Password confirmed.",e.cta='Return to <router-link to="/">Home page</router-link> and login to continue.'},function(t){e.error="Failed to confirm email address: ".concat(t.message),console.error(e.error)})}catch(o){this.error="Failed to confirm email address: ".concat(o.message),console.error(this.error)}}},Vt=Gt,Jt=Object(h["a"])(Vt,Bt,zt,!1,null,null,null),Yt=Jt.exports,Kt={name:"confirm",props:[],components:{ConfirmStitchEmail:Yt,MyHeader:N},data:function(){},methods:{},mounted:function(){}},Qt=Kt,Xt=Object(h["a"])(Qt,Mt,Ht,!1,null,null,null),Zt=Xt.exports,te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register"},[s("MyHeader"),s("div",{staticClass:"section"},[s("h1",{staticClass:"title is-2"},[t._v("Register new user")]),s("div",{staticClass:"field is-horizontal"},[t._m(0),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(1)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(2),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field is-expanded"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(3)])])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"input",attrs:{type:"password",placeholder:"Repeat password"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),t._m(4)])])])]),s("div",{staticClass:"field is-grouped is-grouped-centered"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-success",on:{click:t.register}},[t._v("\n                    Register\n                ")])])]),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n            "+t._s(t.success)+"\n        ")]):t._e(),t.progress?s("div",{staticClass:"notification is-primary"},[t._v("\n            "+t._s(t.progress)+"\n        ")]):t._e()])],1)},ee=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("ID")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Password")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-key"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-key"})])}];function se(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function re(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?se(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):se(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var ae={name:"register",props:[],components:{MyHeader:N},data:function(){return{error:"",success:"",progress:"",email:"",password:"",password2:""}},computed:re({},Object(c["d"])(["stitchClient"])),methods:re({},Object(c["c"])(["incrTest"]),{register:function(){var t=this;if(console.log("Registering user"),this.error="",this.progress="",this.password!=this.password2)this.error="Error, passwords must match.";else{this.progress="Registering ".concat(this.email);var e=this.stitchClient.auth.getProviderClient(P["d"].factory);e.registerWithEmail(this.email,this.password).then(function(){t.success="Registration request being processed – check your inbox",t.progress="Returning to main page in 2 seconds";var e=t;setTimeout(function(){e.$router.push({name:"home"})},2e3)},function(e){t.progress="",t.error="Could not register user: ".concat(e.message),console.error(t.error)})}},setUserLoggedIn:function(t){this.setUser(t)}}),mounted:function(){}},ie=ae,oe=Object(h["a"])(ie,te,ee,!1,null,null,null),ne=oe.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile"},[s("MyHeader"),s("div",{staticClass:"section"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title is-2"},[t._v("User Profile")]),s("div",{staticClass:"field is-horizontal"},[t._m(0),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.name.first,expression:"localCustomer.name.first"}],staticClass:"input",attrs:{type:"name",placeholder:"First"},domProps:{value:t.localCustomer.name.first},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.name,"first",e.target.value)}}}),t._m(1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.name.last,expression:"localCustomer.name.last"}],staticClass:"input",attrs:{type:"name",placeholder:"Last"},domProps:{value:t.localCustomer.name.last},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.name,"last",e.target.value)}}}),t._m(2)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(3),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field is-expanded"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.phone.mobile,expression:"localCustomer.contact.phone.mobile"}],staticClass:"input",attrs:{type:"tel",placeholder:"Mobile phone number"},domProps:{value:t.localCustomer.contact.phone.mobile},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.phone,"mobile",e.target.value)}}}),t._m(4)])]),s("p",{staticClass:"help"},[t._v("Include +CC")])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.phone.home,expression:"localCustomer.contact.phone.home"}],staticClass:"input",attrs:{type:"tel",placeholder:"Home phone number"},domProps:{value:t.localCustomer.contact.phone.home},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.phone,"home",e.target.value)}}}),t._m(5)]),s("p",{staticClass:"help"},[t._v("Include +CC")])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(6),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field is-expanded"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.phone.work,expression:"localCustomer.contact.phone.work"}],staticClass:"input",attrs:{type:"tel",placeholder:"Work phone number"},domProps:{value:t.localCustomer.contact.phone.work},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.phone,"work",e.target.value)}}}),t._m(7)])]),s("p",{staticClass:"help"},[t._v("Include +CC")])]),s("div",{staticClass:"field is-expanded"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.email,expression:"localCustomer.contact.email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",disabled:t.localCustomer.contact.email},domProps:{value:t.localCustomer.contact.email},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact,"email",e.target.value)}}}),t._m(8)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(9),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.number,expression:"localCustomer.contact.deliveryAddress.number"}],staticClass:"input",attrs:{type:"text",placeholder:"House name or number"},domProps:{value:t.localCustomer.contact.deliveryAddress.number},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.deliveryAddress,"number",e.target.value)}}}),t._m(10)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.street,expression:"localCustomer.contact.deliveryAddress.street"}],staticClass:"input",attrs:{type:"text",placeholder:"Street name"},domProps:{value:t.localCustomer.contact.deliveryAddress.street},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.deliveryAddress,"street",e.target.value)}}}),t._m(11)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(12),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.city,expression:"localCustomer.contact.deliveryAddress.city"}],staticClass:"input",attrs:{type:"text",placeholder:"Town or city"},domProps:{value:t.localCustomer.contact.deliveryAddress.city},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.deliveryAddress,"city",e.target.value)}}}),t._m(13)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.state,expression:"localCustomer.contact.deliveryAddress.state"}],staticClass:"input",attrs:{type:"text",placeholder:"State"},domProps:{value:t.localCustomer.contact.deliveryAddress.state},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.deliveryAddress,"state",e.target.value)}}}),t._m(14)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(15),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.postalCode,expression:"localCustomer.contact.deliveryAddress.postalCode"}],staticClass:"input",attrs:{type:"text",placeholder:"Postal code"},domProps:{value:t.localCustomer.contact.deliveryAddress.postalCode},on:{input:function(e){e.target.composing||t.$set(t.localCustomer.contact.deliveryAddress,"postalCode",e.target.value)}}}),t._m(16)])]),t._m(17),s("div",{staticClass:"field"},[s("div",{staticClass:"control is-expanded has-icons-left"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.contact.deliveryAddress.country,expression:"localCustomer.contact.deliveryAddress.country"}],staticClass:"input",attrs:{type:"text",placeholder:"Country"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.localCustomer.contact.deliveryAddress,"country",e.target.multiple?s:s[0])}}},[s("option",{attrs:{selected:"",value:""}},[t._v("Country")]),t._l(t.countries,function(e){return s("option",{key:e.name},[t._v(t._s(e.name))])})],2)]),t._m(18)])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(19),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.marketingPreferences.email,expression:"localCustomer.marketingPreferences.email"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localCustomer.marketingPreferences.email)?t._i(t.localCustomer.marketingPreferences.email,null)>-1:t.localCustomer.marketingPreferences.email},on:{change:function(e){var s=t.localCustomer.marketingPreferences.email,r=e.target,a=!!r.checked;if(Array.isArray(s)){var i=null,o=t._i(s,i);r.checked?o<0&&t.$set(t.localCustomer.marketingPreferences,"email",s.concat([i])):o>-1&&t.$set(t.localCustomer.marketingPreferences,"email",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.localCustomer.marketingPreferences,"email",a)}}}),t._v("\n                            I agree to receive notifications by email\n                        ")])]),s("div",{staticClass:"field"},[s("label",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.marketingPreferences.sms,expression:"localCustomer.marketingPreferences.sms"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localCustomer.marketingPreferences.sms)?t._i(t.localCustomer.marketingPreferences.sms,null)>-1:t.localCustomer.marketingPreferences.sms},on:{change:function(e){var s=t.localCustomer.marketingPreferences.sms,r=e.target,a=!!r.checked;if(Array.isArray(s)){var i=null,o=t._i(s,i);r.checked?o<0&&t.$set(t.localCustomer.marketingPreferences,"sms",s.concat([i])):o>-1&&t.$set(t.localCustomer.marketingPreferences,"sms",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.localCustomer.marketingPreferences,"sms",a)}}}),t._v("\n                            I agree to receive notifications by SMS text message\n                        ")])])])]),s("div",{staticClass:"field is-horizontal"},[t._m(20),s("div",{staticClass:"field-body"},[s("div",{staticClass:"field"},[s("div",{staticClass:"file has-name"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:t.uploadMugshot}}),t._m(21),s("span",{staticClass:"file-name"},[t._v("\n                                    "+t._s(t.mugshotFile.name)+"\n                                ")])])])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control is-expanded has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.mugshotURL,expression:"localCustomer.mugshotURL"}],staticClass:"input",attrs:{type:"url",placeholder:"Mugshot image URL"},domProps:{value:t.localCustomer.mugshotURL},on:{input:function(e){e.target.composing||t.$set(t.localCustomer,"mugshotURL",e.target.value)}}}),t._m(22)])]),t.localCustomer.mugshotURL?s("div",{staticClass:"field"},[s("figure",{staticClass:"image is-128x128"},[s("img",{attrs:{src:t.localCustomer.mugshotURL}})])]):t._e()])]),s("div",{staticClass:"field is-grouped is-grouped-centered"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-success",on:{click:t.saveProfile}},[t._v("\n                        Save Profile\n                    ")])])]),t.progress?s("div",{staticClass:"notification is-info"},[t._v("\n                "+t._s(t.progress)+"\n            ")]):t._e(),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n                "+t._s(t.success)+"\n            ")]):t._e()])])],1)},le=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Name")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Contact")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-phone"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-phone"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-phone"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Delivery address")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-home"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-road"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-building"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-map"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-map-pin"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dropdown is-active"},[s("div",{staticClass:"dropdown-trigger"},[s("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[s("span",[t._v("Country")]),s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-globe"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Marketing preferences")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-label is-normal"},[s("label",{staticClass:"label"},[t._v("Headshot")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"file-cta"},[s("span",{staticClass:"file-icon"},[s("i",{staticClass:"fas fa-upload"})]),s("span",{staticClass:"file-label"},[t._v("\n                                    Upload a mugshot image…\n                                ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-link"})])}],ue=(s("34ef"),s("7c53")),de=s("9e8e");function pe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function me(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?pe(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):pe(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var fe={name:"profile",props:[],components:{MyHeader:N},data:function(){return{error:"",success:"",progress:"",localCustomer:{},countries:[],mugshotFile:{}}},computed:me({},Object(c["d"])(["stitchClient","database","userLoggedIn","userFirstName","customer","user"])),methods:me({},Object(c["c"])(["setCustomer","setUserFirstName"]),{getCountriesList:function(){var t=this;this.stitchClient.callFunction("getCountriesList").then(function(e){t.countries=e},function(t){console.error("Error: failed to fetch country list: ".concat(t.message))})},fetchCustomer:function(){var t=this;this.progress="Looking for existing user profile.",this.database.collection("customers").findOne({"contact.email":this.user.profile.data.email}).then(function(e){e?(t.localCustomer=e,t.progress=""):t.progress=""},function(t){console.error("Error: attempt to read customer document failed: ".concat(t.message))})},saveProfile:function(){var t=this;this.progress="Writing profile to database.",this.error="",this.success="",this.database.collection("customers").updateOne({"contact.email":this.localCustomer.contact.email},this.localCustomer,{upsert:!0}).then(function(){t.progress="",t.setCustomer(t.localCustomer),t.localCustomer.name.first&&t.setUserFirstName(t.localCustomer.name.first),t.success="User profile updated.",t.progress="Returning to main page in 2 seconds";var e=t;setTimeout(function(){e.$router.push({name:"home"})},2e3)},function(e){t.progress="",t.error="Error: Writing profile to the database - ".concat(e.message),console.error(t.error)})},convertImageToBSON:function(t){return new Promise(function(e){var s=new FileReader;s.onload=function(t){var s=new de["b"].Binary(new Uint8Array(t.target.result));e(s)},s.readAsArrayBuffer(t)})},uploadMugshot:function(t){var e=this;this.error="",this.progress="",this.success="";var s=t.target.files||t.dataTransfer.files;if(s.length){this.mugshotFile=s[0];var r=this.stitchClient.getServiceClient(ue["b"].factory,u.a.aws.serviceName);this.convertImageToBSON(this.mugshotFile).then(function(t){var s=Date.now(),a={ACL:"public-read",Bucket:u.a.aws.bucket,ContentType:e.mugshotFile.type,Key:"mug_".concat(e.customer.contact.email,"_").concat(s),Body:t},i=(new ue["a"].Builder).withService("s3").withAction("PutObject").withArgs(a);r.execute(i.build()).then(function(){console.log("storing new url"),e.localCustomer.mugshotURL="https://".concat(u.a.aws.bucket,".s3.amazonaws.com/mug_").concat(e.customer.contact.email,"_").concat(s),console.log("newURL = ".concat(e.localCustomer.mugshotURL))},function(t){e.error="Failed to upload image file: ".concat(t.message)})},function(t){e.error="Error: Failed to convert image file: ".concat(t.messahge,".")})}else this.error="Failed to select a file"}}),created:function(){this.getCountriesList(),this.userLoggedIn?(this.localCustomer=this.customer,this.localCustomer.owner_id=this.stitchClient.auth.user.id,this.localCustomer.contact.email=this.user.profile.data.email,this.fetchCustomer(),this.originalEmail=this.localCustomer.contact.email):(this.error="Cannot access customer profile until user is logged in",console.error(this.error))}},he=fe,ge=Object(h["a"])(he,ce,le,!1,null,null,null),ve=ge.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("MyHeader"),s("div",[s("AnonymousAuth")],1),s("section",{staticClass:"section"},[t.stitchReady&&t.product?s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-5 restrict-height"},[s("div",{staticClass:"container"},[s("ImageBox",{attrs:{productImages:t.product.productImages}})],1)]),s("div",{staticClass:"column is-4"},[s("div",{staticClass:"container"},[s("ProductSummary",{attrs:{productName:t.product.productName,category:t.product.category,categoryHierarchy:t.product.categoryHierarchy,price:t.product.price,averageReviewScore:t.product.reviews.averageReviewScore,numberOfReviews:t.product.reviews.numberOfReviews,productDescription:t.product.description}})],1)]),s("div",{staticClass:"column is-3"},[s("div",{staticClass:"container"},[s("PurchaseBox")],1)])]):t._e(),t.stitchReady&&t.product?s("div",[t.product.reviews&&t.product.reviews.recentReviews&&t.product.reviews.recentReviews.length>0?s("ProductReviews",{attrs:{reviews:t.product.reviews.recentReviews}}):t._e()],1):t._e()]),t.error?s("div",{staticClass:"notification is-danger"},[s("strong",[t._v(t._s(t.error))])]):t._e(),t.success?s("div",{staticClass:"notification is-success"},[t._v("\n      "+t._s(t.success)+"\n  ")]):t._e(),t.progress?s("div",{staticClass:"notification is-primary"},[t._v("\n      "+t._s(t.progress)+"\n  ")]):t._e()],1)},Ce=[],ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("section",{staticClass:"section"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2 restrict-height"},[s("div",{staticClass:"container"},[s("ul",{attrs:{id:"product-images"}},t._l(t.productImages,function(e){return s("li",{key:e,on:{mouseover:function(s){t.currentImage=e}}},[s("a",[s("div",{staticClass:"box"},[s("figure",{staticClass:"image is-square"},[s("img",{attrs:{src:e}})])])])])}),0)])]),s("div",{staticClass:"column is-10"},[t.currentImage?s("figure",{staticClass:"image is-square"},[s("img",{attrs:{src:t.currentImage,alt:""}})]):t._e(),s("div",{staticClass:"container"})])])])])},Oe=[];function _e(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function we(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_e(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_e(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var je={name:"image-box",props:["productImages"],components:{},data:function(){return{currentImage:null}},computed:we({},Object(c["d"])([])),methods:{},created:function(){this.productImages&&this.productImages.length>0&&(this.currentImage=this.productImages[0])}},Pe=je,Ee=(s("0fb1"),Object(h["a"])(Pe,ye,Oe,!1,null,"480eb9a2",null)),ke=Ee.exports,De=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("section",{staticClass:"section"},[s("h3",{staticClass:"title is-3"},[t._v(t._s(t.productName))]),t.category?s("span",{staticClass:"tag"},[t._v(t._s(t.category))]):t._e(),s("Rank",{attrs:{score:t.averageReviewScore,numberReviews:t.numberOfReviews}}),s("table",{staticClass:"table",attrs:{cellspacing:"0",id:"pricing"}},[s("tbody",[t.price.list?s("tr",[s("td",{staticClass:"right"},[t._v("List price:")]),s("td",[t._v("$"+t._s(t.price.list))])]):t._e(),s("tr",[s("td",{staticClass:"right last-child"},[t._v("Our price:")]),s("td",[s("strong",[t._v("$"+t._s(t.price.sale))]),t._v("  "),t.saleTag?s("span",{staticClass:"tag is-danger"},[t._v(t._s(t.saleTag))]):t._e()])]),t.saving>0?s("tr",[s("td",{staticClass:"right"},[t._v("You save:")]),s("td",[t._v("$"+t._s(t.saving)+" (%"+t._s(t.savingPercent)+")")])]):t._e()])]),s("nav",{staticClass:"breadcrumb has-arrow-separator",attrs:{"aria-label":"breadcrumbs"}},[s("ul",{attrs:{id:"category-breadcrumbs"}},t._l(t.categoryHierarchy.slice(1,t.categoryHierarchy.length),function(e){return s("li",{key:e},[s("span",{staticClass:"tag"},[t._v(t._s(e))])])}),0)]),s("div",{staticClass:"content",attrs:{id:"product-description"}},[t._v("\n      "+t._s(t.productDescription)+"\n    ")])],1)])},xe=[];s("6762"),s("2fdb");function Se(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function $e(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Se(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Se(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Ie={name:"product-summary",props:["productName","category","categoryHierarchy","price","averageReviewScore","numberOfReviews","productDescription"],components:{Rank:rt},data:function(){return{saving:0,savingPercent:0,saleTag:null}},computed:$e({},Object(c["d"])([])),methods:{calculateSaving:function(){this.price&&this.price.sale>0&&this.price.list>0&&(this.saving=(this.price.list-this.price.sale).toFixed(2),this.savingPercent=(100*((this.price.list-this.price.sale)/this.price.list).toFixed(2)).toFixed(0),this.categoryHierarchy.includes("sale")&&(this.saleTag="sale"))}},mounted:function(){this.calculateSaving()}},Re=Ie,Le=(s("2304"),Object(h["a"])(Re,De,xe,!1,null,"788ced85",null)),Ae=Le.exports,Fe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ne=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("section",{staticClass:"section"},[s("h3",{staticClass:"title is-3"},[t._v("Placeholder for for purchase panel")])])])}];function Te(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function Ue(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Te(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Te(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Me={name:"purchase-box",props:[],components:{},data:function(){return{}},computed:Ue({},Object(c["d"])([])),methods:{},mounted:function(){}},He=Me,Be=Object(h["a"])(He,Fe,Ne,!1,null,"06e3d6a0",null),ze=Be.exports,We=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("section",{staticClass:"section"},[s("h3",{staticClass:"title is-3"},[t._v("Reviews")]),s("ul",{attrs:{id:"review-list"}},t._l(t.reviews,function(e){return s("li",{key:e},[s("div",{staticClass:"box"},[t._v(" "+t._s(e.review))])])}),0)])])},qe=[];function Ge(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function Ve(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ge(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ge(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var Je={name:"product-reviews",props:["reviews"],components:{},data:function(){return{}},computed:Ve({},Object(c["d"])([])),methods:{},mounted:function(){}},Ye=Je,Ke=(s("60d1"),Object(h["a"])(Ye,We,qe,!1,null,"71636674",null)),Qe=Ke.exports;function Xe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function Ze(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Xe(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Xe(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var ts={name:"product",props:[],components:{AnonymousAuth:q,MyHeader:N,ImageBox:ke,ProductSummary:Ae,PurchaseBox:ze,ProductReviews:Qe},data:function(){return{error:"",progress:"",success:"",stitchReady:!1,productID:null,product:null}},computed:Ze({},Object(c["d"])(["userLoggedIn","stitchClient","database"])),methods:{fetchProduct:function(){var t=this;this.productID?(this.progress="Fetching product details",this.database.collection("products").findOne({productID:this.productID}).then(function(e){e?(t.progress="",t.product=e):(t.progress="",t.error="No product found with productId ".concat(t.productID))},function(e){t.progress="",t.error="Error: failed to read product data: ".concat(e.message),console.error(t.error)})):this.error="Error, no productID included in URL query parameters"},waitUntilStitchReady:function(){if(this.stitchClient&&this.stitchClient.auth.isLoggedIn)this.stitchReady=!0,this.fetchProduct();else{console.log("Waiting");var t=this;Object(Rt["setTimeout"])(t.waitUntilStitchReady,100)}}},mounted:function(){this.productID=this.$route.query.productID,this.waitUntilStitchReady()}},es=ts,ss=(s("82f0"),Object(h["a"])(es,be,Ce,!1,null,"1fa3865d",null)),rs=ss.exports,as=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},is=[],os={name:"test",props:[],components:{},data:function(){return{}},computed:{},methods:{},mounted:function(){}},ns=os,cs=Object(h["a"])(ns,as,is,!1,null,"48399d4f",null),ls=cs.exports;r["a"].use(b["a"]);var us=new b["a"]({routes:[{path:"/",name:"home",component:Ut,props:!0},{path:"/confirm",name:"confirm",component:Zt,props:!0},{path:"/register",name:"register",component:ne,props:!0},{path:"/profile",name:"profile",component:ve,props:!0},{path:"/product",name:"product",component:rs,props:!0},{path:"/test",name:"test",component:ls,props:!0}]});s("92c6"),s("abe2");r["a"].config.productionTip=!1;var ds={name:{title:"",first:"",last:""},contact:{email:"",phone:{home:"",work:"",mobile:""},deliveryAddress:{number:"",street:"",city:"",state:"",postalCode:"",country:""}}},ps=new c["a"].Store({state:{stitchClient:null,database:null,userLoggedIn:!1,userFirstName:"Guest",user:null,customer:{name:{title:"",first:"",last:""},contact:{email:"",phone:{home:"",work:"",mobile:""},deliveryAddress:{number:"",street:"",city:"",state:"",postalCode:"",country:""}},marketingPreferences:{email:!1,sms:!1}},categoryFilter:[]},getters:{},mutations:{setStitchClient:function(t,e){t.stitchClient=e},setDatabase:function(t,e){t.database=e},setLoggedIn:function(t,e){t.userLoggedIn=e},setUserFirstName:function(t,e){t.userFirstName=e},setUser:function(t,e){t.user=e},setCustomer:function(t,e){t.customer=e},setCategoryFilter:function(t,e){t.categoryFilter=e},signout:function(t){t.customer=ds,t.user=null,t.userLoggedIn=!1,t.userFirstName="Guest",t.stitchClient=null,t.database=null,t.categoryFilter=[]}},actions:{setUserLoggedIn:function(t,e){var s=t.commit,r=t.state;return s("setLoggedIn",!0),s("setUser",e),e.profile.firstName?s("setUserFirstName",e.profile.firstName):e.profile.email&&s("setUserFirstName",e.profile.email),new Promise(function(t,e){try{r.database.collection("customers").findOne({"contact.email":r.user.profile.data.email}).then(function(e){e?(s("setCustomer",e),s("setUserFirstName",e.name.first)):console.log("No matching customer document found in the database."),t()},function(t){console.error("Error: attempt to read customer document failed: ".concat(t.message)),e({message:"Error: attempt to read customer document failed: ".concat(t.message)})})}catch(a){console.error("Error: Call to fetch customer document failed: ".concat(a.message)),e({message:"Error: Call to fetch customer document failed: ".concat(a.message)})}})}}});new r["a"]({router:us,store:ps,data:{},computed:{},render:function(t){return t(v)}}).$mount("#app")},"60d1":function(t,e,s){"use strict";var r=s("8cf2"),a=s.n(r);a.a},"82f0":function(t,e,s){"use strict";var r=s("05ee"),a=s.n(r);a.a},"8cf2":function(t,e,s){},"8eef":function(t,e,s){},a8ca:function(t,e,s){},abe2:function(t,e,s){},bf58:function(t,e,s){"use strict";var r=s("a8ca"),a=s.n(r);a.a},c316:function(t,e,s){t.exports=s.p+"img/MongoDB_Logo_White_RGB.e2701f1d.png"},db49:function(t,e){var s={appName:"mongodb-ecommerce",appId:"ecommerce-iukkg",database:"ecommerce",dbUser:"billy",dbPassword:"billy",aws:{serviceName:"AWS2",bucket:"ecommerce-mongodb-mugshots"}};t.exports=s},de37:function(t,e,s){},e281:function(t,e,s){"use strict";var r=s("1cb4"),a=s.n(r);a.a}});
//# sourceMappingURL=app.34cad7f8.js.map